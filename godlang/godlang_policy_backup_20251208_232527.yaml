godlang_version: "1.1"
meta:
  name: "GODBRAIN_DEFAULT_GENESIS_V1_1_SAFE"
  description: "Safer, more stable policy for GODBRAIN QUANTUM + GODMONEY APEX (OKX Demo). Lower risk caps, faster drawdown protection."
  author: "CODE-21 AI ARCHITECT"
  created_at: "2025-12-08"
  last_updated_at: "2025-12-08"

regime_selection:
  # Maps env.risk_score (-100 to +100) to market regimes
  by_risk_score:
    - name: "CRASH"
      range: { min: -100.0, max: -60.0 }
    - name: "BEAR"
      range: { min: -60.0, max: -20.0 }
    - name: "NEUTRAL"
      range: { min: -20.0, max: 20.0 }
    - name: "BULL"
      range: { min: 20.0, max: 60.0 }
    - name: "EUPHORIA"
      range: { min: 60.0, max: 100.0 }

  equity_change_overrides:
    enabled: true
    rules:
      # Daha agresif koruma:  -4% → BEAR,  -8% → CRASH
      - condition: "equity_drawdown_pct <= -8.0"
        force_regime: "CRASH"
      - condition: "equity_drawdown_pct <= -4.0"
        force_regime: "BEAR"

energy_budget:
  # Runtime ve IO patlamasın diye üst sınırlar.
  compute:
    max_genome_evaluations: 800
    max_doctrine_switches: 4
  io:
    max_api_calls_per_tick: 15
    max_shadow_compare_per_tick: 5
  risk:
    # Her tick toplam yeni risk daha kısıtlı
    max_new_notional_pct_per_tick: 0.35
    max_position_flips_per_symbol: 1

regimes:
  CRASH:
    description: "Emergency protocol. Capital preservation is priority."
    equity:
      max_total_risk_pct: 0.12
      max_symbol_risk_pct: 0.04
      target_equity_utilization_pct: 0.15
    leverage:
      default: 2
      max: 3
    positions:
      max_open_symbols: 1
      prefer_long: false
      prefer_flat: true
    dna_modifiers:
      risk_multiplier: 0.3
      sl_tp_widening_factor: 0.5
      rsi_buy_shift: -10.0
      rsi_sell_shift: -10.0
    trade_frequency:
      min_seconds_between_trades: 180
    notes: "Sadece aşırı güçlü sinyalde küçük pozisyon. Nakit kral."

  BEAR:
    description: "Defensive trading. Short bias or tight longs."
    equity:
      max_total_risk_pct: 0.30
      max_symbol_risk_pct: 0.08
      target_equity_utilization_pct: 0.40
    leverage:
      default: 4
      max: 6
    positions:
      max_open_symbols: 2
      prefer_long: false
      prefer_flat: false
    dna_modifiers:
      risk_multiplier: 0.7
      sl_tp_widening_factor: 1.0
      rsi_buy_shift: -3.0
      rsi_sell_shift: -3.0
    trade_frequency:
      min_seconds_between_trades: 60
    notes: "Defansif, hızlı kar al. Uzun süre açık pozisyon yok."

  NEUTRAL:
    description: "Standard operating mode. Balanced accumulation."
    equity:
      # ESKİ: 0.60 / 0.15 → DAHA STABİL: 0.45 / 0.12
      max_total_risk_pct: 0.45
      max_symbol_risk_pct: 0.12
      target_equity_utilization_pct: 0.60
    leverage:
      default: 6
      max: 8
    positions:
      max_open_symbols: 3
      prefer_long: true
      prefer_flat: false
    dna_modifiers:
      risk_multiplier: 1.0
      sl_tp_widening_factor: 1.0
      rsi_buy_shift: 0.0
      rsi_sell_shift: 0.0
    trade_frequency:
      min_seconds_between_trades: 30
    notes: "Default mod. DNA yön seçsin ama kaldıraç ve risk daha yumuşak."

  BULL:
    description: "Growth mode. Allow runners and higher leverage."
    equity:
      # ESKİ: 0.75 / 0.25 → DAHA STABİL: 0.60 / 0.18
      max_total_risk_pct: 0.60
      max_symbol_risk_pct: 0.18
      target_equity_utilization_pct: 0.75
    leverage:
      default: 8
      max: 10
    positions:
      max_open_symbols: 3
      prefer_long: true
      prefer_flat: false
    dna_modifiers:
      risk_multiplier: 1.1
      sl_tp_widening_factor: 1.1
      rsi_buy_shift: 2.0
      rsi_sell_shift: 2.0
    trade_frequency:
      min_seconds_between_trades: 30
    notes: "Yükselişi kovala ama portföy riskini sınırlı tut."

  EUPHORIA:
    description: "High velocity mode. Ride the wave but watch the cliff."
    equity:
      # ESKİ: 0.80 / 0.30 → DAHA STABİL: 0.70 / 0.22
      max_total_risk_pct: 0.70
      max_symbol_risk_pct: 0.22
      target_equity_utilization_pct: 0.80
    leverage:
      default: 9
      max: 10
    positions:
      max_open_symbols: 3
      prefer_long: true
      prefer_flat: false
    dna_modifiers:
      risk_multiplier: 1.2
      sl_tp_widening_factor: 1.2
      rsi_buy_shift: 4.0
      rsi_sell_shift: 4.0
    trade_frequency:
      min_seconds_between_trades: 20
    notes: "Çok agresif değil, ama momentum bozulursa hemen çekil."

resonance_overrides:
  enabled: true
  modes:
    QUANTUM_RESONANCE:
      require_fresh_seconds: 60
      flow_multiplier_cap: 2.0       # 2.5 → 2.0 (daha kontrollü)
      risk_multiplier_boost: 1.15    # 1.2 → 1.15
      max_total_risk_pct_cap: 0.75   # 0.85 → 0.75
      notes: "Yüksek koherans ama yine de kurumsal risk sınırlarıyla."
    COHERENT:
      flow_multiplier_cap: 1.4
      risk_multiplier_boost: 1.05
    DECOHERENCE:
      flow_multiplier_cap: 0.8
      risk_multiplier_boost: 0.7
      force_max_total_risk_pct: 0.45
      notes: "Gürültü yüksek, exposure azalt."
    MANUAL_OVERRIDE:
      allow_human_lock: true
      lock_regime: "NEUTRAL"

apex_bridge:
  leverage:
    default: 10
    max: 10
  equity_utilization:
    target_pct: 0.80
    hard_cap_pct: 0.90
  per_symbol:
    "BTC/USDT:USDT":
      weight: 1.0
      max_symbol_risk_pct_override: 0.30   # Apex tarafında çok hafif gevşek, Godlang yine cap’liyor.
    "ETH/USDT:USDT":
      weight: 0.9
    "SOL/USDT:USDT":
      weight: 0.8

academy:
  logging:
    enabled: true
    include_env_snapshot: true
    include_resonance_snapshot: true
    include_regime_label: true
    notes: "Phase 2 modelleri için daha stabil, daha temiz training data."
